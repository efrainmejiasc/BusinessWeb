
@{
    ViewBag.Title = "ReportAssistance";
}

<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
<link href="~/Content/bootstrap.css" rel="stylesheet" />
<link href="~/Content/bootstrap-theme.css" rel="stylesheet" />
<link href="~/Content/css/global.css" rel="stylesheet" />
<script src="~/Scripts/jquery-3.4.1.min.js" type="text/javascript"></script>
<script src="~/Scripts/jquery-3.4.1.js" type="text/javascript"></script>
<script src="/Content/js/global.js" type="text/javascript"></script>

<div class="container col-md-12" style="margin-top:5%;display:inline;">

    <div class="row" id="searchDiv" >
        <div class="form-group">
            <div class="input-group">
                <input type="date" id="fecha" name="fecha" value="" min="" max="" class="form form-control" style="width:900px">
                <span class="input-group-addon" style="background-color:white;border-color:white;"> </span>
                <select id="grado" class="form-control" style="width:900px"> </select>
                <span class="input-group-addon" style="background-color:white;border-color:white;"> </span>
                <select id="grupo" class="form-control" style="width:900px"></select>
                <span class="input-group-addon" style="background-color:white;border-color:white;"> </span> &nbsp;&nbsp;&nbsp;
                <input type="button" id="buscar" value="Buscar" class="btn btn-primary" style="width:120px;" onclick="GetAsistencia();" />
            </div>
        </div>
    </div>

    <div>
      <input type="button" id="btnExcel"  class="dt-button buttons-copy buttons-html5" value="Excel"  style="width:10vw;display:none;"/><br />
    </div>
    <table id="tableAsistencia" class="table table-bordered table-hover myDataTable">

        <thead>
            <tr style="background-color:gainsboro;">
                <th onclick="SortTable(0)">Nª</th>
                <th onclick="SortTable(1)">Nombre</th>
                <th onclick="SortTable(2)">Apellido</th>
                <th onclick="SortTable(3)">Email</th>
                <th onclick="SortTable(4)">Materia</th>
                <th onclick="SortTable(5)">Estado</th>
                <th></th>
            </tr>
        </thead>

        <tbody>
        </tbody>
    </table>


    <div id="myModal" class="modal">
        <div class="modal-content2">

            <div style="float:right;">
                <span id="cerrar" class="close" onclick="CerrarModalUpdate();">&times;</span><br /><br />
                <input type="hidden" id="idAsistencia" />
                <input type="hidden" id="dniAdm" />
            </div>
            <div style="text-align:center;"> <h4> Actualizar Asistencia</h4></div><br />
            <div style="float:left;">
                <label> Documento de Identidad: </label>
                <input type="text" id="dni" class="form form-control" disabled />
                <label> Correo Electronico: </label>
                <input type="text" id="email" class="form form-control" disabled />
                <label> Asignatura: </label>
                <input type="text" id="materia" class="form form-control" disabled />
                <label> Estado: </label>
                <select id="asistencia" class="form form-control"> 
                    <option value="1"> Asistente </option>
                    <option value="0"> Inasistente </option>
                </select><br />
                 <label> Observacion: </label><br /> 
                 <textarea id="observacion" rows="3" cols="50" maxlength="490" class="form form-control"  required autocomplete="on"> </textarea>
            </div>
            <div style="float:right">
                <img id="alumno" class="imgCarnet" alt="No posee foto"><br /><br /><br /><br />
                <input type="button" value="Actualizar" class="btn btn-primary" style="width:10vw;" onclick="EditAtending();" />
            </div>
        </div>
    </div>
</div>


<script>
    $(document).ready(function () {
         $('#btnExcel').hide();
        document.documentElement.style.overflowX = 'hidden';
        GetDate('#fecha');
        GetGrado();
        GetGrupo();
    });

       function SortTable(n) {
        var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
        table = document.getElementById("tableAsistencia");
        switching = true;
        dir = "asc";
        while (switching) {
            switching = false;
            rows = table.rows;
            for (i = 1; i < (rows.length - 1); i++) {
                shouldSwitch = false;
                x = rows[i].getElementsByTagName("TD")[n];
                y = rows[i + 1].getElementsByTagName("TD")[n];
                if (dir == "asc") {
                    if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
                        shouldSwitch = true;
                        break;
                    }
                } else if (dir == "desc") {
                    if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
                        shouldSwitch = true;
                        break;
                    }
                }
            }
            if (shouldSwitch) {
                rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                switching = true;
                switchcount++;
            } else {
                if (switchcount == 0 && dir == "asc") {
                    dir = "desc";
                    switching = true;
                }
            }
        }
    }
</script>
